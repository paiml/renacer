<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Export to JSON/CSV - The Renacer Book - Pure Rust System Call Tracing</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A comprehensive guide to renacer: syscall tracing, DWARF correlation, and performance analysis">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Renacer Book - Pure Rust System Call Tracing</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/paiml/renacer" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/paiml/renacer/edit/main/book/src/examples/export-data.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="example-export-and-analyze-data"><a class="header" href="#example-export-and-analyze-data">Example: Export and Analyze Data</a></h1>
<p>This example shows how to export Renacer traces to JSON and CSV formats for programmatic analysis, automation, and data science workflows.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Renacer supports three export formats for programmatic analysis:</p>
<ul>
<li><strong>JSON</strong> - Structured data for scripts, APIs, and automation</li>
<li><strong>CSV</strong> - Spreadsheet-friendly for Excel, R, Python pandas</li>
<li><strong>HTML</strong> - Visual reports (covered in <a href="./html-reports.html">HTML Reports</a>)</li>
</ul>
<h2 id="json-export"><a class="header" href="#json-export">JSON Export</a></h2>
<h3 id="basic-json-export"><a class="header" href="#basic-json-export">Basic JSON Export</a></h3>
<p>Export syscall traces to JSON for programmatic analysis:</p>
<pre><code class="language-bash">$ renacer --format json -- ls /tmp &gt; trace.json
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{
  "version": "0.4.1",
  "command": ["ls", "/tmp"],
  "syscalls": [
    {
      "name": "openat",
      "args": {
        "dirfd": "AT_FDCWD",
        "pathname": "/tmp",
        "flags": ["O_RDONLY", "O_DIRECTORY", "O_CLOEXEC"]
      },
      "return": {
        "value": 3,
        "error": null
      },
      "timestamp": 1234567890.123456,
      "duration_ns": 12345,
      "pid": 12345
    },
    {
      "name": "getdents64",
      "args": {
        "fd": 3,
        "count": 32768
      },
      "return": {
        "value": 1024,
        "error": null
      },
      "timestamp": 1234567890.234567,
      "duration_ns": 5678,
      "pid": 12345
    }
  ],
  "summary": {
    "total_syscalls": 45,
    "total_duration_ms": 123.456,
    "error_count": 2
  }
}
</code></pre>
<p><strong>JSON Structure:</strong></p>
<ul>
<li><code>version</code> - Renacer version (for compatibility)</li>
<li><code>command</code> - Traced command and arguments</li>
<li><code>syscalls[]</code> - Array of syscall events</li>
<li><code>summary</code> - Aggregate statistics</li>
</ul>
<h3 id="json-with-statistics"><a class="header" href="#json-with-statistics">JSON with Statistics</a></h3>
<p>Combine with statistics mode for aggregate data:</p>
<pre><code class="language-bash">$ renacer --format json -c -- ./myapp &gt; stats.json
</code></pre>
<p><strong>Additional fields in JSON:</strong></p>
<pre><code class="language-json">{
  "statistics": {
    "read": {
      "calls": 1000,
      "errors": 0,
      "total_time_ms": 123.456,
      "avg_time_ms": 0.123,
      "min_time_ms": 0.001,
      "max_time_ms": 5.678,
      "p50_ms": 0.100,
      "p90_ms": 0.300,
      "p99_ms": 1.234
    }
  }
}
</code></pre>
<h2 id="processing-json-with-jq"><a class="header" href="#processing-json-with-jq">Processing JSON with jq</a></h2>
<h3 id="extract-specific-data"><a class="header" href="#extract-specific-data">Extract Specific Data</a></h3>
<p><strong>Example 1:</strong> List all syscall names</p>
<pre><code class="language-bash">$ jq -r '.syscalls[].name' trace.json | sort | uniq
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>close
getdents64
openat
read
write
</code></pre>
<p><strong>Example 2:</strong> Find all errors</p>
<pre><code class="language-bash">$ jq '.syscalls[] | select(.return.error != null)' trace.json
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{
  "name": "openat",
  "args": {
    "pathname": "/nonexistent"
  },
  "return": {
    "value": -1,
    "error": "ENOENT"
  }
}
</code></pre>
<p><strong>Example 3:</strong> Count syscalls by name</p>
<pre><code class="language-bash">$ jq '.syscalls | group_by(.name) | map({name: .[0].name, count: length})' trace.json
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">[
  {"name": "read", "count": 1000},
  {"name": "write", "count": 500},
  {"name": "open", "count": 100}
]
</code></pre>
<h3 id="calculate-aggregate-statistics"><a class="header" href="#calculate-aggregate-statistics">Calculate Aggregate Statistics</a></h3>
<p><strong>Example 1:</strong> Total time by syscall</p>
<pre><code class="language-bash">$ jq '.syscalls | group_by(.name) | map({
    name: .[0].name,
    total_ns: (map(.duration_ns) | add),
    total_ms: ((map(.duration_ns) | add) / 1000000)
  }) | sort_by(.total_ms) | reverse' trace.json
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">[
  {"name": "read", "total_ns": 123456789, "total_ms": 123.456},
  {"name": "write", "total_ns": 98765432, "total_ms": 98.765},
  {"name": "open", "total_ns": 45678901, "total_ms": 45.678}
]
</code></pre>
<p><strong>Example 2:</strong> Average latency per syscall</p>
<pre><code class="language-bash">$ jq '.syscalls | group_by(.name) | map({
    name: .[0].name,
    avg_ns: ((map(.duration_ns) | add) / length),
    avg_ms: (((map(.duration_ns) | add) / length) / 1000000)
  })' trace.json
</code></pre>
<p><strong>Example 3:</strong> Find slowest syscalls</p>
<pre><code class="language-bash">$ jq '.syscalls | sort_by(.duration_ns) | reverse | .[0:10] | .[] | {name, duration_ms: (.duration_ns / 1000000)}' trace.json
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{"name": "fsync", "duration_ms": 23.456}
{"name": "read", "duration_ms": 12.345}
{"name": "write", "duration_ms": 9.876}
...
</code></pre>
<h3 id="filter-and-transform"><a class="header" href="#filter-and-transform">Filter and Transform</a></h3>
<p><strong>Example 1:</strong> Extract file operations only</p>
<pre><code class="language-bash">$ jq '.syscalls[] | select(.name | test("^(open|read|write|close)"))'  trace.json
</code></pre>
<p><strong>Example 2:</strong> Convert timestamps to readable format</p>
<pre><code class="language-bash">$ jq '.syscalls[] | {
    name,
    time: (.timestamp | strftime("%Y-%m-%d %H:%M:%S")),
    duration_ms: (.duration_ns / 1000000)
  }' trace.json
</code></pre>
<p><strong>Example 3:</strong> Group errors by type</p>
<pre><code class="language-bash">$ jq '.syscalls | map(select(.return.error != null)) | group_by(.return.error) | map({
    error: .[0].return.error,
    count: length,
    syscalls: (map(.name) | unique)
  })' trace.json
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">[
  {
    "error": "ENOENT",
    "count": 15,
    "syscalls": ["open", "stat"]
  },
  {
    "error": "EACCES",
    "count": 3,
    "syscalls": ["open"]
  }
]
</code></pre>
<h2 id="csv-export"><a class="header" href="#csv-export">CSV Export</a></h2>
<h3 id="basic-csv-export"><a class="header" href="#basic-csv-export">Basic CSV Export</a></h3>
<p>Export for spreadsheet analysis:</p>
<pre><code class="language-bash">$ renacer --format csv -- ls /tmp &gt; trace.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-csv">name,args,return_value,return_error,timestamp,duration_ns,pid,source_file,source_line,source_function
openat,"dirfd=AT_FDCWD pathname=/tmp flags=O_RDONLY|O_DIRECTORY|O_CLOEXEC",3,,1234567890.123456,12345,12345,,,
getdents64,"fd=3 count=32768",1024,,1234567890.234567,5678,12345,,,
close,"fd=3",0,,1234567890.345678,1234,12345,,,
</code></pre>
<p><strong>Column descriptions:</strong></p>
<ul>
<li><code>name</code> - Syscall name</li>
<li><code>args</code> - Space-separated arguments</li>
<li><code>return_value</code> - Return value (integer)</li>
<li><code>return_error</code> - Error code (if any)</li>
<li><code>timestamp</code> - Unix timestamp with microseconds</li>
<li><code>duration_ns</code> - Duration in nanoseconds</li>
<li><code>pid</code> - Process ID</li>
<li><code>source_file</code> - Source file (with --source)</li>
<li><code>source_line</code> - Line number (with --source)</li>
<li><code>source_function</code> - Function name (with --source)</li>
</ul>
<h3 id="csv-with-statistics"><a class="header" href="#csv-with-statistics">CSV with Statistics</a></h3>
<pre><code class="language-bash">$ renacer --format csv -c -- ./myapp &gt; stats.csv
</code></pre>
<p><strong>Statistics CSV format:</strong></p>
<pre><code class="language-csv">syscall,calls,errors,total_time_ms,avg_time_ms,min_time_ms,max_time_ms,p50_ms,p90_ms,p99_ms
read,1000,0,123.456,0.123,0.001,5.678,0.100,0.300,1.234
write,500,0,98.765,0.197,0.005,8.901,0.150,0.450,2.345
open,100,2,45.678,0.456,0.010,12.345,0.400,1.200,5.678
</code></pre>
<h2 id="processing-csv-with-command-line-tools"><a class="header" href="#processing-csv-with-command-line-tools">Processing CSV with Command-Line Tools</a></h2>
<h3 id="using-csvkit"><a class="header" href="#using-csvkit">Using csvkit</a></h3>
<p><strong>Example 1:</strong> View summary statistics</p>
<pre><code class="language-bash">$ csvstat trace.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>Column: name
  Unique values: 10
  Most common: read (1000x)

Column: duration_ns
  Mean: 12345.67
  Median: 5678.0
  Max: 123456.0
</code></pre>
<p><strong>Example 2:</strong> Filter to errors only</p>
<pre><code class="language-bash">$ csvgrep -c return_error -r '.+' trace.csv
</code></pre>
<p><strong>Example 3:</strong> Sort by duration</p>
<pre><code class="language-bash">$ csvsort -c duration_ns -r trace.csv | head -20
</code></pre>
<p><strong>Example 4:</strong> Select specific columns</p>
<pre><code class="language-bash">$ csvcut -c name,duration_ns,return_error trace.csv
</code></pre>
<h3 id="using-awk"><a class="header" href="#using-awk">Using awk</a></h3>
<p><strong>Example 1:</strong> Calculate average duration per syscall</p>
<pre><code class="language-bash">$ tail -n +2 trace.csv | awk -F',' '{
    sum[$1] += $6;  # duration_ns column
    count[$1]++;
  }
  END {
    for (name in sum) {
      printf "%s: avg %.2f us\n", name, sum[name]/count[name]/1000
    }
  }' | sort -k2 -rn
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>fsync: avg 4567.89 us
read: avg 123.45 us
write: avg 98.76 us
</code></pre>
<p><strong>Example 2:</strong> Count errors by type</p>
<pre><code class="language-bash">$ tail -n +2 trace.csv | awk -F',' '$4 != "" {errors[$4]++} END {for (e in errors) print e, errors[e]}' | sort -k2 -rn
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>ENOENT 15
EACCES 3
EINVAL 1
</code></pre>
<h2 id="analysis-with-python-pandas"><a class="header" href="#analysis-with-python-pandas">Analysis with Python pandas</a></h2>
<h3 id="load-and-explore"><a class="header" href="#load-and-explore">Load and Explore</a></h3>
<pre><code class="language-python">import pandas as pd
import numpy as np

# Load trace
df = pd.read_csv('trace.csv')

# Basic info
print(df.info())
print(df.describe())

# First few rows
print(df.head())
</code></pre>
<h3 id="aggregate-analysis"><a class="header" href="#aggregate-analysis">Aggregate Analysis</a></h3>
<p><strong>Example 1:</strong> Group by syscall name</p>
<pre><code class="language-python"># Group by syscall, calculate statistics
stats = df.groupby('name').agg({
    'duration_ns': ['count', 'mean', 'std', 'min', 'max'],
    'return_error': 'count'
}).round(2)

print(stats.sort_values(('duration_ns', 'mean'), ascending=False))
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>            duration_ns                              return_error
                  count      mean       std    min        max        count
name
fsync             100  4567.89  1234.56  1000  12345.00       100
read             1000   123.45    45.67    10   5678.00      1000
write             500    98.76    34.56    20   8901.00       500
</code></pre>
<p><strong>Example 2:</strong> Time series analysis</p>
<pre><code class="language-python"># Convert timestamp to datetime
df['time'] = pd.to_datetime(df['timestamp'], unit='s')

# Resample to 1-second bins
time_series = df.set_index('time').resample('1S')['duration_ns'].agg(['count', 'sum', 'mean'])

print(time_series)
</code></pre>
<p><strong>Example 3:</strong> Error analysis</p>
<pre><code class="language-python"># Filter to errors only
errors = df[df['return_error'].notna()]

# Group errors by type and syscall
error_summary = errors.groupby(['return_error', 'name']).size().unstack(fill_value=0)

print(error_summary)
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>            name  close  open  read  stat
return_error
EACCES              0     3     0     0
ENOENT              0    10     0     5
</code></pre>
<h3 id="visualization"><a class="header" href="#visualization">Visualization</a></h3>
<p><strong>Example 1:</strong> Duration distribution</p>
<pre><code class="language-python">import matplotlib.pyplot as plt

# Convert to milliseconds
df['duration_ms'] = df['duration_ns'] / 1_000_000

# Histogram
df.boxplot(column='duration_ms', by='name', figsize=(12, 6))
plt.ylabel('Duration (ms)')
plt.title('Syscall Duration Distribution')
plt.savefig('duration-boxplot.png')
</code></pre>
<p><strong>Example 2:</strong> Top syscalls by time</p>
<pre><code class="language-python"># Calculate total time per syscall
total_time = df.groupby('name')['duration_ns'].sum().sort_values(ascending=False).head(10)

# Bar chart
total_time.plot(kind='barh', figsize=(10, 6))
plt.xlabel('Total Time (ns)')
plt.title('Top 10 Syscalls by Total Time')
plt.tight_layout()
plt.savefig('top-syscalls.png')
</code></pre>
<p><strong>Example 3:</strong> Timeline plot</p>
<pre><code class="language-python"># Set timestamp as index
df['time'] = pd.to_datetime(df['timestamp'], unit='s')
df = df.set_index('time')

# Plot syscall rate over time
df['name'].resample('100ms').count().plot(figsize=(12, 4))
plt.ylabel('Syscalls per 100ms')
plt.title('Syscall Rate Over Time')
plt.savefig('timeline.png')
</code></pre>
<h2 id="analysis-with-r"><a class="header" href="#analysis-with-r">Analysis with R</a></h2>
<h3 id="load-and-summarize"><a class="header" href="#load-and-summarize">Load and Summarize</a></h3>
<pre><code class="language-r">library(dplyr)
library(ggplot2)

# Load data
trace &lt;- read.csv('trace.csv')

# Summary statistics
summary(trace)

# Group by syscall
syscall_stats &lt;- trace %&gt;%
  group_by(name) %&gt;%
  summarise(
    count = n(),
    avg_duration = mean(duration_ns),
    max_duration = max(duration_ns),
    errors = sum(!is.na(return_error))
  ) %&gt;%
  arrange(desc(avg_duration))

print(syscall_stats)
</code></pre>
<h3 id="visualization-1"><a class="header" href="#visualization-1">Visualization</a></h3>
<p><strong>Example 1:</strong> Duration boxplot</p>
<pre><code class="language-r">ggplot(trace, aes(x = name, y = duration_ns / 1000)) +
  geom_boxplot() +
  coord_flip() +
  labs(
    title = "Syscall Duration Distribution",
    x = "Syscall",
    y = "Duration (microseconds)"
  ) +
  theme_minimal()

ggsave("r-duration-boxplot.png", width = 10, height = 6)
</code></pre>
<p><strong>Example 2:</strong> Time series</p>
<pre><code class="language-r">trace$time &lt;- as.POSIXct(trace$timestamp, origin = "1970-01-01")

ggplot(trace, aes(x = time)) +
  geom_histogram(bins = 50) +
  labs(
    title = "Syscall Frequency Over Time",
    x = "Time",
    y = "Count"
  ) +
  theme_minimal()
</code></pre>
<h2 id="cicd-integration"><a class="header" href="#cicd-integration">CI/CD Integration</a></h2>
<h3 id="automated-performance-regression-detection"><a class="header" href="#automated-performance-regression-detection">Automated Performance Regression Detection</a></h3>
<p><strong>GitHub Actions example:</strong></p>
<pre><code class="language-yaml">name: Performance Check

on: [pull_request]

jobs:
  perf-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Build Release
        run: cargo build --release

      - name: Baseline Performance
        run: |
          git checkout main
          cargo build --release
          renacer --format json -c -- ./target/release/myapp &gt; baseline.json

      - name: PR Performance
        run: |
          git checkout ${{ github.head_ref }}
          cargo build --release
          renacer --format json -c -- ./target/release/myapp &gt; pr.json

      - name: Compare Performance
        run: |
          jq -r '.summary.total_duration_ms' baseline.json &gt; baseline_time.txt
          jq -r '.summary.total_duration_ms' pr.json &gt; pr_time.txt

          BASELINE=$(cat baseline_time.txt)
          PR=$(cat pr_time.txt)
          THRESHOLD=10  # 10% regression threshold

          DIFF=$(echo "scale=2; ($PR - $BASELINE) / $BASELINE * 100" | bc)

          if (( $(echo "$DIFF &gt; $THRESHOLD" | bc -l) )); then
            echo "❌ Performance regression: ${DIFF}% slower"
            exit 1
          else
            echo "✅ Performance acceptable: ${DIFF}% change"
          fi
</code></pre>
<h3 id="monitoring-integration"><a class="header" href="#monitoring-integration">Monitoring Integration</a></h3>
<p><strong>Export to Prometheus:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# Export Renacer stats to Prometheus format

renacer --format json -c -- ./production-app &gt; trace.json

jq -r '.statistics | to_entries[] | "syscall_duration_seconds{\(.key)} \(.value.total_time_ms / 1000)"' trace.json &gt; metrics.prom

# Push to Prometheus pushgateway
curl -X POST --data-binary @metrics.prom http://pushgateway:9091/metrics/job/app_trace
</code></pre>
<p><strong>Result:</strong></p>
<pre><code>syscall_duration_seconds{read} 0.123456
syscall_duration_seconds{write} 0.098765
syscall_duration_seconds{fsync} 0.045678
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="1-use-appropriate-format"><a class="header" href="#1-use-appropriate-format">1. Use Appropriate Format</a></h3>
<pre><code class="language-bash"># JSON for automation/scripting
renacer --format json -c -- ./app &gt; stats.json

# CSV for spreadsheet/data science
renacer --format csv -c -- ./app &gt; stats.csv

# HTML for sharing with team
renacer --format html -c -- ./app &gt; report.html
</code></pre>
<h3 id="2-compress-large-exports"><a class="header" href="#2-compress-large-exports">2. Compress Large Exports</a></h3>
<pre><code class="language-bash"># Compress JSON
renacer --format json -- ./app | gzip &gt; trace.json.gz

# Analyze without decompressing
zcat trace.json.gz | jq '.summary'
</code></pre>
<h3 id="3-filter-before-export"><a class="header" href="#3-filter-before-export">3. Filter Before Export</a></h3>
<pre><code class="language-bash"># Only export file operations
renacer --format json -e 'trace=file' -- ./app &gt; file-ops.json

# Smaller file, faster processing
</code></pre>
<h3 id="4-combine-with-statistics-mode"><a class="header" href="#4-combine-with-statistics-mode">4. Combine with Statistics Mode</a></h3>
<pre><code class="language-bash"># Full trace (large)
renacer --format json -- ./app &gt; full-trace.json

# Summary only (small)
renacer --format json -c -- ./app &gt; summary.json
</code></pre>
<h3 id="5-version-your-exports"><a class="header" href="#5-version-your-exports">5. Version Your Exports</a></h3>
<pre><code class="language-bash"># Include version in filename
renacer --format json -c -- ./app &gt; "trace-$(git describe --tags)-$(date +%Y%m%d).json"
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="large-export-files"><a class="header" href="#large-export-files">Large Export Files</a></h3>
<p><strong>Problem:</strong> JSON/CSV exports are gigabytes in size.</p>
<p><strong>Solutions:</strong></p>
<ol>
<li>
<p><strong>Filter syscalls:</strong></p>
<pre><code class="language-bash">renacer --format json -e 'trace=file' -- ./app
</code></pre>
</li>
<li>
<p><strong>Use statistics mode:</strong></p>
<pre><code class="language-bash">renacer --format json -c -- ./app  # Summary only
</code></pre>
</li>
<li>
<p><strong>Compress:</strong></p>
<pre><code class="language-bash">renacer --format json -- ./app | gzip &gt; trace.json.gz
</code></pre>
</li>
<li>
<p><strong>Stream processing:</strong></p>
<pre><code class="language-bash">renacer --format json -- ./app | jq -c '.syscalls[] | select(.name == "read")'
</code></pre>
</li>
</ol>
<h3 id="json-parsing-errors"><a class="header" href="#json-parsing-errors">JSON Parsing Errors</a></h3>
<p><strong>Problem:</strong> <code>jq</code> reports syntax error.</p>
<p><strong>Causes:</strong></p>
<ul>
<li>Incomplete export (process interrupted)</li>
<li>Corrupted file</li>
</ul>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Verify JSON is complete
tail -1 trace.json  # Should show closing }

# Validate JSON
jq empty trace.json &amp;&amp; echo "Valid JSON" || echo "Invalid JSON"

# Re-export if corrupted
</code></pre>
<h3 id="csv-encoding-issues"><a class="header" href="#csv-encoding-issues">CSV Encoding Issues</a></h3>
<p><strong>Problem:</strong> Excel shows garbled characters.</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Add UTF-8 BOM for Excel
renacer --format csv -- ./app | iconv -f UTF-8 -t UTF-8-BOM &gt; trace.csv
</code></pre>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p><strong>Export formats for different use cases:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Format</th><th>Best For</th><th>Tools</th></tr></thead><tbody>
<tr><td><strong>JSON</strong></td><td>Automation, scripts, APIs</td><td>jq, Python, JavaScript</td></tr>
<tr><td><strong>CSV</strong></td><td>Spreadsheets, data science</td><td>Excel, R, pandas, csvkit</td></tr>
<tr><td><strong>HTML</strong></td><td>Sharing, documentation</td><td>Browser (any device)</td></tr>
</tbody></table>
</div>
<p><strong>Common workflows:</strong></p>
<ul>
<li>✅ <strong>jq</strong> - Command-line JSON processing</li>
<li>✅ <strong>csvkit</strong> - CSV analysis (csvstat, csvgrep, csvsort)</li>
<li>✅ <strong>pandas</strong> - Python data analysis and visualization</li>
<li>✅ <strong>R</strong> - Statistical analysis and plotting</li>
<li>✅ <strong>CI/CD</strong> - Automated performance regression detection</li>
<li>✅ <strong>Monitoring</strong> - Export to Prometheus/Grafana</li>
</ul>
<p><strong>Key practices:</strong></p>
<ol>
<li>Filter syscalls before export (reduce file size)</li>
<li>Use statistics mode for summaries</li>
<li>Compress large exports (gzip)</li>
<li>Version exported files (Git tags + timestamps)</li>
<li>Validate exports (jq empty, csvstat)</li>
</ol>
<h2 id="related"><a class="header" href="#related">Related</a></h2>
<ul>
<li><a href="../reference/format-json.html">JSON Output Format</a> - JSON specification</li>
<li><a href="../reference/format-csv.html">CSV Output Format</a> - CSV specification</li>
<li><a href="../core-concepts/statistics.html">Statistics Mode</a> - Aggregate data</li>
<li><a href="../core-concepts/filtering.html">Filtering Syscalls</a> - Reduce export size</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../examples/multi-process.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../examples/html-reports.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../examples/multi-process.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../examples/html-reports.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
